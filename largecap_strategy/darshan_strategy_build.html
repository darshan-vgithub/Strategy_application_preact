<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flameback || Strategy</title>
    <link rel="icon" href="./assets/logo-favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <script type="module">
            import { html, render,useState } from "https://esm.sh/htm/preact/standalone";
            import { Form } from "./form.js";
            import strategies from "./strategies.json" with { type: "json" };

             function App() {
        const [strategyName, setStrategyName] = useState("");
        const [strategyData, setStrategyData] = useState({ class: "", filters: [] });

        const handleStrategyNameChange = (e) => {
          const name = e.target.value;
          setStrategyName(name);

          // Check if the strategy exists in the data
          if (strategies[name]) {
            setStrategyData(strategies[name]);
          } else {
            setStrategyData({ class: "", filters: [] }); // Clear data if strategy not found
          }
        };

        return html`
          <${Form}
            strategy=${strategyName}
            class_name=${strategyData.class || ""}
            filters=${strategyData.filters || []}
            onStrategyNameChange=${handleStrategyNameChange}
          />
        `;
      }

      render(html`<${App} />`, document.body);
    </script>
  </body>
</html>
